
<script type="text/html">
<div class="app-container" id="appContainer" aria-hidden="true">
    <div class="app-header">
        <div class="app-title">ProClean - Profesyonel Ã‡amaÅŸÄ±rhane YÃ¶netim Sistemi</div>
        <div class="user-info">
            <span id="userRole">OperatÃ¶r: YÃ¼kleniyor...</span>

            <button id="settingsBtn" class="btn btn-secondary" onclick="showSettingsModal()">
                <i class="fas fa-cog"></i>
                <span>Ayarlar</span>
            </button>
            
            <button type="button" id="logoutBtn" class="btn btn-danger">Ã‡Ä±kÄ±ÅŸ Yap</button>
        </div>
    </div>
    
    <div class="printer-status-section">
        <div id="printer-status" class="printer-status">
            <span id="printer-indicator">ðŸ”´</span>
            <span id="printer-text">Checking printer...</span>
            <button id="test-printer" onclick="testPrinter()">Test Printer</button>
            <button onclick="checkPrinterStatus()">Check Status</button>
        </div>
    </div>

    <div class="tabs" role="tablist" aria-label="Ana Sekmeler">
        <div class="tab active" data-tab="packaging" role="tab">Paketleme</div>
        <div class="tab" data-tab="shipping" role="tab">Sevkiyat</div>
        <div class="tab" data-tab="stock" role="tab">Stok Sorgu</div>
        <div class="tab admin-only" data-tab="reports" role="tab">Raporlar</div>
    </div>

    <div class="tab-content">
        <div class="tab-pane active" id="packagingTab">
            <div class="packaging-header">
                <div class="customer-info">
                    <div class="info-group">
                        <label for="customerSelect">MÃ¼ÅŸteri SeÃ§imi</label>
                        <select id="customerSelect" required>
                            <option value="">MÃ¼ÅŸteri seÃ§in...</option>
                        </select>
                        <div class="validation-error" id="customerError">MÃ¼ÅŸteri seÃ§imi zorunludur</div>
                    </div>
                    <div class="info-group">
                        <label for="personnelSelect">Personel</label>
                        <select id="personnelSelect" required>
                            <option value="">Personel seÃ§in...</option>
                        </select>
                        <div class="validation-error" id="personnelError">Personel seÃ§imi zorunludur</div>
                    </div>
                    <div class="info-group">
                        <label>Tarih</label>
                        <span id="currentDate">-</span>
                    </div>
                </div>
                <div class="action-buttons">
                    <button type="button" class="btn btn-primary" onclick="showAllCustomers()">MÃ¼ÅŸteri YÃ¶netimi</button>
                    <button type="button" class="btn btn-warning" onclick="generateDailyReport()">Ä°ÅŸ Sonu Raporu</button>
                    <button type="button" class="btn btn-success" onclick="sendToRamp()">Konteynere Ekle</button>
                </div>
            </div>

            <div class="packaging-content">
                <div class="barcode-section">
                    <h3>Barkod Okuma</h3>
                    <div class="barcode-input">
                        <input type="text" id="barcodeInput" placeholder="Barkod okutun veya girin" autofocus>
                        <button type="button" onclick="processBarcode()"><i class="fas fa-search"></i></button>
                    </div>
                    <div id="barcodeResult">
                        <div id="scannedBarcodes" style="margin-top: 10px; max-height: 150px; overflow-y: auto;"></div>
                    </div>
                    
                    <div class="quick-buttons">
                        <div class="quick-btn" onclick="openQuantityModal('BÃ¼yÃ¼k Ã‡arÅŸaf')" data-product="BÃ¼yÃ¼k Ã§arÅŸaf">
                            <span>BÃ¼yÃ¼k Ã§arÅŸaf</span>
                            <div class="quantity-badge" id="BÃ¼yÃ¼k Ã‡arÅŸaf-quantity">0</div>
                        </div>
                        <div class="quick-btn" onclick="openQuantityModal('Ã‡arÅŸaf')" data-product="Ã‡arÅŸaf">
                            <span>Ã‡arÅŸaf</span>
                            <div class="quantity-badge" id="Ã‡arÅŸaf-quantity">0</div>
                        </div>
                        <div class="quick-btn" onclick="openQuantityModal('BÃ¼yÃ¼k Nevresim')" data-product="BÃ¼yÃ¼k Nevresim">
                            <span>BÃ¼yÃ¼k Nevresim</span>
                            <div class="quantity-badge" id="BÃ¼yÃ¼k Nevresim-quantity">0</div>
                        </div>
                        <div class="quick-btn" onclick="openQuantityModal('Nevresim')" data-product="Nevresim">
                            <span>Nevresim</span>
                            <div class="quantity-badge" id="Nevresim-quantity">0</div>
                        </div>
                        <div class="quick-btn" onclick="openQuantityModal('BÃ¼yÃ¼k Havlu')" data-product="BÃ¼yÃ¼k Havlu">
                            <span>BÃ¼yÃ¼k Havlu</span>
                            <div class="quantity-badge" id="BÃ¼yÃ¼k Havlu-quantity">0</div>
                        </div>
                        <div class="quick-btn" onclick="openQuantityModal('Havlu')" data-product="Havlu">
                            <span>Havlu</span>
                            <div class="quantity-badge" id="Havlu-quantity">0</div>
                        </div>
                        <div class="quick-btn" onclick="openQuantityModal('YastÄ±k')" data-product="YastÄ±k">
                            <span>YastÄ±k</span>
                            <div class="quantity-badge" id="YastÄ±k-quantity">0</div>
                        </div>
                        <div class="quick-btn" onclick="openQuantityModal('YastÄ±k KÄ±lÄ±fÄ±')" data-product="YastÄ±k KÄ±lÄ±fÄ±">
                            <span>YastÄ±k KÄ±lÄ±fÄ±</span>
                            <div class="quantity-badge" id="YastÄ±k KÄ±lÄ±fÄ±-quantity">0</div>
                        </div>
                         <div class="quick-btn" onclick="openQuantityModal('Alez')" data-product="Alez">
                            <span>Alez</span>
                            <div class="quantity-badge" id="Alez-quantity">0</div>
                        </div>
                    </div>
                    
                    <button type="button" class="btn btn-primary" onclick="openManualEntry()" style="width:100%; margin-top:1rem;">Manuel GiriÅŸ</button>
                    <button type="button" class="btn btn-secondary" onclick="toggleScannerMode()" style="width:100%; margin-top:0.5rem;" id="scannerToggle">
                        <i class="fas fa-camera"></i> Barkod TarayÄ±cÄ±yÄ± AÃ§
                    </button>
                </div>

                <div class="pending-packages">
                    <h3>Bekleyen Paketler</h3>
                    <table class="package-table">
                        <thead>
                            <tr>
                                <th>
                                    <input type="checkbox" id="selectAllPackages" onchange="toggleSelectAll()">
                                </th>
                                <th>Paket No</th>
                                <th>MÃ¼ÅŸteri</th>
                                <th>ÃœrÃ¼n</th>
                                <th>Tarih</th>
                                <th>Durum</th>
                            </tr>
                        </thead>
                        <tbody id="packagesTableBody">
                        </tbody>
                    </table>
                </div>

                <div class="package-details">
                    <h3>Paket DetaylarÄ±</h3>
                    <div id="packageDetailContent">
                        <p style="text-align:center; color:#666; margin:2rem 0;">Paket seÃ§in</p>
                    </div>
                    
                    <div class="package-actions">
                        <button type="button" class="btn btn-success" onclick="completePackage()">Paketle</button>
                        <button type="button" class="btn btn-warning" onclick="printAllLabels()">Etiket YazdÄ±r</button>
                        <button type="button" class="btn btn-danger" onclick="deleteSelectedPackages()">Sil</button>
                    </div>
                </div>
            </div>
        </div>

        <div class="tab-pane" id="shippingTab">
            <div class="packaging-header">
                <div class="customer-info">
                    <div class="info-group">
                        <label for="shippingFilter">Durum Filtresi</label>
                        <select id="shippingFilter" onchange="filterShipping()">
                            <option value="all">TÃ¼mÃ¼</option>
                            <option value="beklemede">Beklemede</option>
                            <option value="sevk-edildi">Sevk Edildi</option>
                        </select>
                    </div>
                    <div class="info-group">
                        <label for="containerSearch">Konteyner Ara</label>
                        <input type="text" id="containerSearch" placeholder="Konteyner no..." oninput="searchContainers()">
                    </div>
                </div>
                <div class="action-buttons">
                    <button type="button" class="btn btn-primary" onclick="createNewContainer()">Yeni Konteyner</button>
                    <button type="button" class="btn btn-warning" onclick="loadCurrentContainer()">Mevcut Konteyner</button>
                    <button type="button" class="btn btn-danger" onclick="deleteContainer()">Konteyner Sil</button>
                </div>
            </div>

            <div id="shippingFolders">
                <!-- Customer folders will be populated here -->
            </div>
        </div>

        <div class="tab-pane" id="stockTab">
            <div class="stock-search">
                <input type="text" id="stockSearch" placeholder="Stok ara..." oninput="searchStock()">
                <button type="button" class="btn btn-primary" onclick="clearStockSearch()">Temizle</button>
                <button type="button" class="btn btn-success" onclick="exportStock()">StoklarÄ± DÄ±ÅŸa Aktar</button>
            </div>

            <table class="stock-table">
                <thead>
                    <tr>
                        <th>Stok Kodu</th>
                        <th>ÃœrÃ¼n AdÄ±</th>
                        <th>Mevcut Adet</th>
                        <th>Birim</th>
                        <th>Durum</th>
                        <th>Son GÃ¼ncelleme</th>
                        <th>Ä°ÅŸlemler</th>
                    </tr>
                </thead>
                <tbody id="stockTableBody">
                    <!-- Stock data will be populated here -->
                </tbody>
            </table>

            <div class="file-upload">
                <h3>Stok DosyasÄ± YÃ¼kle</h3>
                <p>Excel (.xlsx, .xls) veya CSV (.csv) dosyasÄ± seÃ§in</p>
                <input type="file" id="stockFileUpload" accept=".xlsx,.xls,.csv" onchange="document.getElementById('selectedFileName').textContent = this.files[0] ? this.files[0].name : ''">
                <div>
                    <span id="selectedFileName"></span>
                    <div class="validation-error" id="fileError"></div>
                </div>
                <button type="button" class="upload-button" onclick="uploadStockFile()">
                    <i class="fas fa-upload"></i> Dosya YÃ¼kle
                </button>
                <button type="button" class="btn btn-secondary" onclick="downloadTemplate()" style="margin-left: 10px;">
                    <i class="fas fa-download"></i> Åžablon Ä°ndir
                </button>
            </div>
        </div>

        <div class="tab-pane admin-only" id="reportsTab">
            <div class="packaging-header">
                <h3>Raporlar</h3>
                <div class="action-buttons">
                    <button type="button" class="btn btn-primary" onclick="generateCustomReport()">Ã–zel Rapor</button>
                    <button type="button" class="btn btn-warning" onclick="exportReports()">RaporlarÄ± DÄ±ÅŸa Aktar</button>
                </div>
            </div>

            <div class="report-filters" style="display: flex; gap: 15px; margin-bottom: 20px; flex-wrap: wrap;">
                <div class="info-group">
                    <label for="reportType">Rapor TÃ¼rÃ¼</label>
                    <select id="reportType">
                        <option value="daily">GÃ¼nlÃ¼k Rapor</option>
                        <option value="weekly">HaftalÄ±k Rapor</option>
                        <option value="monthly">AylÄ±k Rapor</option>
                        <option value="custom">Ã–zel Rapor</option>
                    </select>
                </div>
                <div class="info-group">
                    <label for="startDate">BaÅŸlangÄ±Ã§ Tarihi</label>
                    <input type="date" id="startDate">
                </div>
                <div class="info-group">
                    <label for="endDate">BitiÅŸ Tarihi</label>
                    <input type="date" id="endDate">
                </div>
                <div class="info-group" style="align-self: flex-end;">
                    <button type="button" class="btn btn-primary" onclick="loadReports()">RaporlarÄ± YÃ¼kle</button>
                </div>
            </div>

            <table class="stock-table">
                <thead>
                    <tr>
                        <th>Rapor Tarihi</th>
                        <th>Rapor TÃ¼rÃ¼</th>
                        <th>Paket SayÄ±sÄ±</th>
                        <th>Toplam Adet</th>
                        <th>OluÅŸturan</th>
                        <th>Ä°ÅŸlemler</th>
                    </tr>
                </thead>
                <tbody id="reportsTableBody">
                    <!-- Reports will be populated here -->
                </tbody>
            </table>
        </div>
    </div>

    <div class="app-footer">
        <div class="container-info">
            <span>Aktif Konteyner: <strong id="containerNumber">Yok</strong></span>
            <span>|</span>
            <span>Toplam Paket: <strong id="totalPackages">0</strong></span>
            <span>|</span>
            <span>ProClean Â© 2025</span>
        </div>
        <div id="connectionStatus">Ã‡evrimiÃ§i</div>
    </div>
</div>
</script>
