<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>ProClean - Profesyonel Çamaşırhane Yönetim Sistemi</title>

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="https://cdn.jsdelivr.net/npm/emailjs-com@3.2.0/dist/email.min.js"></script>

    <!-- Local libraries -->
    <script src="libs/JsBarcode.all.min.js"></script>
    <script src="libs/jspdf.umd.min.js"></script>
    <script src="libs/jspdf.plugin.autotable.min.js"></script>
    <script src="libs/papaparse.min.js"></script>
    <script src="libs/xlsx.full.min.js"></script>
    
    <!-- Local styles -->
    <link rel="stylesheet" href="styles/main.css">
    <link rel="stylesheet" href="styles/modals.css">
</head>
<body>
    <!-- API Key Giriş Modalı -->
    <div class="api-key-modal" id="apiKeyModal">
        <div class="api-key-content">
            <h2>Supabase API Anahtarı Gerekli</h2>
            <p>Uygulamayı kullanabilmek için geçerli bir Supabase API anahtarı girmeniz gerekiyor.</p>
            <input type="text" id="apiKeyInput" class="api-key-input" placeholder="Supabase API Anahtarınızı girin">
            <div class="quantity-buttons">
                <button type="button" class="btn btn-primary" onclick="saveApiKey()">Kaydet</button>
                <button type="button" class="btn btn-secondary" onclick="showApiKeyHelp()">Yardım</button>
            </div>
            <p style="margin-top: 1rem; font-size: 0.9rem; color: #666;">
                API anahtarını nasıl alacağınızı bilmiyorsanız "Yardım" butonuna tıklayın.
            </p>
        </div>
    </div>

    <div class="login-container" id="loginScreen">
        <div class="login-form">
            <h1>ProClean - Oturum Aç</h1>
            <div class="form-group">
                <label for="email">E-posta</label>
                <input type="email" id="email" placeholder="E-posta adresinizi girin" required>
                <div class="validation-error" id="emailError">Geçerli bir e-posta adresi girin</div>
            </div>
            <div class="form-group">
                <label for="password">Şifre</label>
                <input type="password" id="password" placeholder="Şifrenizi girin" required>
                <div class="validation-error" id="passwordError">Şifre gereklidir</div>
            </div>
            <button type="button" class="btn btn-primary" id="loginBtn">Giriş Yap</button>
            <div style="margin-top: 1rem; text-align: center;">
                <a href="#" onclick="showApiKeyModal()" style="color: #3498db; text-decoration: underline; font-size: 0.9rem;">API Anahtarını Yönet</a>
            </div>
        </div>
    </div>

    <!-- Main app container (loaded from components) -->
    <div id="app-container-placeholder"></div>

    <!-- Alert container -->
    <div class="alert-container" id="alertContainer"></div>

    <!-- Toast -->
    <div class="toast" id="toast" role="status" aria-live="polite"></div>
    <div class="offline-indicator" id="offlineIndicator">Çevrimdışı Mod</div>

    <!-- Print Label Container (hidden) -->
    <div id="printContainer" style="display:none;"></div>

    <!-- Load components -->
    <script src="components/modals.html" type="text/html" id="modals-template"></script>
    <script src="components/tabs.html" type="text/html" id="tabs-template"></script>
    
    <!-- Load scripts -->
    <script src="scripts/supabase.js"></script>
    <script src="scripts/auth.js"></script>
    <script src="scripts/main.js"></script>
    <script src="scripts/barcode.js"></script>
    <script src="scripts/printing.js"></script>
    <script src="scripts/inventory.js"></script>
    <script src="scripts/reports.js"></script>
    <script src="src/scripts/app.js"></script>
    <script src="src/scripts/reports.js"></script>
    <script src="src/scripts/domUtils.js"></script>
    <script src="src/scripts/debug.js"></script>
    <script src="src/scripts/fallback.js"></script>


    
    <!-- Initialize app -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Load components
            loadComponents();
            
            // Initialize the application
            initApp();
        });
        
        function loadComponents() {
            // Load app container
            const appContainerTemplate = document.getElementById('tabs-template').textContent;
            document.getElementById('app-container-placeholder').innerHTML = appContainerTemplate;
            
            // Load modals
            const modalsTemplate = document.getElementById('modals-template').textContent;
            document.body.innerHTML += modalsTemplate;
        }
    </script>
</body>
</html>
