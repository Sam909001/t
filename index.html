<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>ProClean - Profesyonel Ã‡amaÅŸÄ±rhane YÃ¶netim Sistemi</title>

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="https://cdn.jsdelivr.net/npm/emailjs-com@3.2.0/dist/email.min.js"></script>
    <link rel="stylesheet" href="style.css">


    <!-- âœ… Local libraries -->
<script src="libs/JsBarcode.all.min.js"></script>
<script src="libs/jspdf.umd.min.js"></script>
<script src="libs/jspdf.plugin.autotable.min.js"></script>
<script src="libs/papaparse.min.js"></script>
<script src="libs/xlsx.full.min.js"></script>
<script src="libs/roboto-vfs.js"></script>

    <script>
document.addEventListener("DOMContentLoaded", function() {
    const doc = new jsPDF();

    // Set font to Roboto Bold (from VFS)
    doc.setFont("Roboto", "bold");
    doc.setFontSize(16);

    // Test Turkish letters
    const testText = "Ã‡, Åž, Ä°, Ã–, Ãœ, ÄŸ, Ã¼, ÅŸ, Ã¶, Ã§";
    doc.text(testText, 10, 20);

    // Save PDF
    doc.save("test-turkish-font.pdf");
});
</script>

    </head>
<body>
    <!-- API Key GiriÅŸ ModalÄ± -->
    <div class="api-key-modal" id="apiKeyModal">
        <div class="api-key-content">
            <h2>Supabase API AnahtarÄ± Gerekli</h2>
            <p>UygulamayÄ± kullanabilmek iÃ§in geÃ§erli bir Supabase API anahtarÄ± girmeniz gerekiyor.</p>
            <input type="text" id="apiKeyInput" class="api-key-input" placeholder="Supabase API AnahtarÄ±nÄ±zÄ± girin">
            <div class="quantity-buttons">
                <button type="button" class="btn btn-primary" onclick="saveApiKey()">Kaydet</button>
                <button type="button" class="btn btn-secondary" onclick="showApiKeyHelp()">YardÄ±m</button>
            </div>
            <p style="margin-top: 1rem; font-size: 0.9rem; color: #666;">
                API anahtarÄ±nÄ± nasÄ±l alacaÄŸÄ±nÄ±zÄ± bilmiyorsanÄ±z "YardÄ±m" butonuna tÄ±klayÄ±n.
            </p>
        </div>
    </div>

    <div class="login-container" id="loginScreen">
        <div class="login-form">
            <h1>ProClean - Oturum AÃ§</h1>
            <div class="form-group">
                <label for="email">E-posta</label>
                <input type="email" id="email" placeholder="E-posta adresinizi girin" required>
                <div class="validation-error" id="emailError">GeÃ§erli bir e-posta adresi girin</div>
            </div>
            <div class="form-group">
                <label for="password">Åžifre</label>
                <input type="password" id="password" placeholder="Åžifrenizi girin" required>
                <div class="validation-error" id="passwordError">Åžifre gereklidir</div>
            </div>
            <button type="button" class="btn btn-primary" id="loginBtn">GiriÅŸ Yap</button>
            <div style="margin-top: 1rem; text-align: center;">
                <a href="#" onclick="showApiKeyModal()" style="color: #3498db; text-decoration: underline; font-size: 0.9rem;">API AnahtarÄ±nÄ± YÃ¶net</a>
            </div>
        </div>
    </div>

    <div class="app-container" id="appContainer" aria-hidden="true">
        <div class="app-header">
            <div class="app-title">ProClean - Profesyonel Ã‡amaÅŸÄ±rhane YÃ¶netim Sistemi</div>
            <div class="user-info">
                <span id="userRole">OperatÃ¶r: YÃ¼kleniyor...</span>

            
   <button id="settingsBtn" class="btn btn-secondary" onclick="showSettingsModal()">
    <i class="fas fa-cog"></i>
    <span>Ayarlar</span>
</button>

                
                <button type="button" id="logoutBtn" class="btn btn-danger">Ã‡Ä±kÄ±ÅŸ Yap</button>
            </div>
        </div>
                       <div class="printer-status-section">
    <div id="printer-status" class="printer-status">
        <span id="printer-indicator">ðŸ”´</span>
        <span id="printer-text">Checking printer...</span>
        <button id="test-printer">Test Printer</button>
        <button onclick="checkPrinterStatus()">Check Status</button>
    </div>
</div>

        <div class="tabs" role="tablist" aria-label="Ana Sekmeler">
            <div class="tab active" data-tab="packaging" role="tab">Paketleme</div>
            <div class="tab" data-tab="shipping" role="tab">Sevkiyat</div>
            <div class="tab" data-tab="stock" role="tab">Stok Sorgu</div>
            <div class="tab admin-only" data-tab="reports" role="tab">Raporlar</div>
        </div>

        <div class="tab-content">
            <div class="tab-pane active" id="packagingTab">
                <div class="packaging-header">
                    <div class="customer-info">
                        <div class="info-group">
                            <label for="customerSelect">MÃ¼ÅŸteri SeÃ§imi</label>
                            <select id="customerSelect" required>
                                <option value="">MÃ¼ÅŸteri seÃ§in...</option>
                            </select>
                            <div class="validation-error" id="customerError">MÃ¼ÅŸteri seÃ§imi zorunludur</div>
                        </div>
                        <div class="info-group">
                            <label for="personnelSelect">Personel</label>
                            <select id="personnelSelect" required>
                                <option value="">Personel seÃ§in...</option>
                            </select>
                            <div class="validation-error" id="personnelError">Personel seÃ§imi zorunludur</div>
                        </div>
                        <div class="info-group">
                            <label>Tarih</label>
                            <span id="currentDate">-</span>
                        </div>
                    </div>
                    <div class="action-buttons">
                        <button type="button" class="btn btn-primary" onclick="showAllCustomers()">MÃ¼ÅŸteri YÃ¶netimi</button>
                        <button type="button" class="btn btn-warning" onclick="generateDailyReport()">Ä°ÅŸ Sonu Raporu</button>
                        <button type="button" class="btn btn-success" onclick="sendToRamp()">Konteynere Ekle</button>
                    </div>
                </div>

                <div class="packaging-content">
                    <div class="barcode-section">
                        <h3>Barkod Okuma</h3>
                        <div class="barcode-input">
                            <input type="text" id="barcodeInput" placeholder="Barkod okutun veya girin" autofocus>
                            <button type="button" onclick="processBarcode()"><i class="fas fa-search"></i></button>
                        </div>
                        <div id="barcodeResult">
                            <div id="scannedBarcodes" style="margin-top: 10px; max-height: 150px; overflow-y: auto;"></div>
                        </div>
                        
                        <div class="quick-buttons">
                            <div class="quick-btn" onclick="openQuantityModal('BÃ¼yÃ¼k Ã‡arÅŸaf')" data-product="BÃ¼yÃ¼k Ã§arÅŸaf">
                                <span>BÃ¼yÃ¼k Ã§arÅŸaf</span>
                                <div class="quantity-badge" id="BÃ¼yÃ¼k Ã‡arÅŸaf-quantity">0</div>
                            </div>
                            <div class="quick-btn" onclick="openQuantityModal('Ã‡arÅŸaf')" data-product="Ã‡arÅŸaf">
                                <span>Ã‡arÅŸaf</span>
                                <div class="quantity-badge" id="Ã‡arÅŸaf-quantity">0</div>
                            </div>
                            <div class="quick-btn" onclick="openQuantityModal('BÃ¼yÃ¼k Nevresim')" data-product="BÃ¼yÃ¼k Nevresim">
                                <span>BÃ¼yÃ¼k Nevresim</span>
                                <div class="quantity-badge" id="BÃ¼yÃ¼k Nevresim-quantity">0</div>
                            </div>
                            <div class="quick-btn" onclick="openQuantityModal('Nevresim')" data-product="Nevresim">
                                <span>Nevresim</span>
                                <div class="quantity-badge" id="Nevresim-quantity">0</div>
                            </div>
                            <div class="quick-btn" onclick="openQuantityModal('BÃ¼yÃ¼k Havlu')" data-product="BÃ¼yÃ¼k Havlu">
                                <span>BÃ¼yÃ¼k Havlu</span>
                                <div class="quantity-badge" id="BÃ¼yÃ¼k Havlu-quantity">0</div>
                            </div>
                            <div class="quick-btn" onclick="openQuantityModal('Havlu')" data-product="Havlu">
                                <span>Havlu</span>
                                <div class="quantity-badge" id="Havlu-quantity">0</div>
                            </div>
                            <div class="quick-btn" onclick="openQuantityModal('YastÄ±k')" data-product="YastÄ±k">
                                <span>YastÄ±k</span>
                                <div class="quantity-badge" id="YastÄ±k-quantity">0</div>
                            </div>
                            <div class="quick-btn" onclick="openQuantityModal('YastÄ±k KÄ±lÄ±fÄ±')" data-product="YastÄ±k KÄ±lÄ±fÄ±">
                                <span>YastÄ±k KÄ±lÄ±fÄ±</span>
                                <div class="quantity-badge" id="YastÄ±k KÄ±lÄ±fÄ±-quantity">0</div>
                            </div>
                             <div class="quick-btn" onclick="openQuantityModal('Alez')" data-product="Alez">
                                <span>Alez</span>
                                <div class="quantity-badge" id="Alez-quantity">0</div>
                            </div>
                        </div>
                        
                        <button type="button" class="btn btn-primary" onclick="openManualEntry()" style="width:100%; margin-top:1rem;">Manuel GiriÅŸ</button>
                        <button type="button" class="btn btn-secondary" onclick="toggleScannerMode()" style="width:100%; margin-top:0.5rem;" id="scannerToggle">
                            <i class="fas fa-camera"></i> Barkod TarayÄ±cÄ±yÄ± AÃ§
                        </button>
                    </div>

                    

                  <div class="pending-packages">
    <h3>Bekleyen Paketler</h3>
    <table class="package-table">
        <thead>
            <tr>
                <th>
                    <input type="checkbox" id="selectAllPackages" onchange="toggleSelectAll()">
                </th>
                <th>Paket No</th>
                <th>MÃ¼ÅŸteri</th>
                <th>ÃœrÃ¼n</th>
                <th>Adet</th> <!-- NEW COLUMN -->
                <th>Tarih</th>
                <th>Durum</th>
            </tr>
        </thead>
        <tbody id="packagesTableBody">
        </tbody>
    </table>
</div>

<div class="package-details">
    <h3>Paket DetaylarÄ±</h3>

    <div id="packageDetailContent">
        <p style="text-align:center; color:#666; margin:2rem 0;">Paket seÃ§in</p>
    </div>

    <!-- Buttons always under Paket DetaylarÄ± -->
    <div class="package-actions">
        <button type="button" class="btn btn-success" onclick="completePackage()">Paketle</button>
        <button type="button" class="btn btn-warning" onclick="printSelectedElectron()">Etiket YazdÄ±r</button>
        <button type="button" class="btn btn-danger" onclick="deleteSelectedPackages()">Sil</button>
    </div>
</div>

            <div class="tab-pane" id="shippingTab">
                <div class="packaging-header">
                    <div class="customer-info">
                        <div class="info-group">
                            <label for="shippingFilter">Durum Filtresi</label>
                            <select id="shippingFilter" onchange="filterShipping()">
                                <option value="all">TÃ¼mÃ¼</option>
                                <option value="beklemede">Beklemede</option>
                                <option value="sevk-edildi">Sevk Edildi</option>
                            </select>
                        </div>
                        <div class="info-group">
                            <label for="containerSearch">Konteyner Ara</label>
                            <input type="text" id="containerSearch" placeholder="Konteyner no..." oninput="searchContainers()">
                        </div>
                    </div>
                    <div class="action-buttons">
                        <button type="button" class="btn btn-primary" onclick="createNewContainer()">Yeni Konteyner</button>
                        <button type="button" class="btn btn-warning" onclick="loadCurrentContainer()">Mevcut Konteyner</button>
                        <button type="button" class="btn btn-danger" onclick="deleteContainer()">Konteyner Sil</button>
                    </div>
                </div>

                <div id="shippingFolders">
                    <!-- Customer folders will be populated here -->
                </div>
            </div>


            <td>
    <div class="edit-buttons" style="display: none;">
        <button onclick="saveStockFromRow(this, 'STK001')">Kaydet</button>
        <button onclick="cancelStockFromRow(this, 'STK001')">Ä°ptal</button>
    </div>
</td>
            

          <div class="tab-pane" id="stockTab">
                <div class="stock-search">
                    <input type="text" id="stockSearch" placeholder="Stok ara..." oninput="searchStock()">
                    <button type="button" class="btn btn-primary" onclick="clearStockSearch()">Temizle</button>
                    <button type="button" class="btn btn-success" onclick="exportStock()">StoklarÄ± DÄ±ÅŸa Aktar</button>
                </div>

                <table class="stock-table">
                    <thead>
                        <tr>
                            <th>Stok Kodu</th>
                            <th>ÃœrÃ¼n AdÄ±</th>
                            <th>Mevcut Adet</th>
                            <th>Birim</th>
                            <th>Durum</th>
                            <th>Son GÃ¼ncelleme</th>
                            <th>Ä°ÅŸlemler</th>
                        </tr>
                    </thead>
                    <tbody id="stockTableBody">
                        <!-- Stock data will be populated here -->
                    </tbody>
                </table>



                <div class="file-upload">
                    <h3>Stok DosyasÄ± YÃ¼kle</h3>
                    <p>Excel (.xlsx, .xls) veya CSV (.csv) dosyasÄ± seÃ§in</p>
                    <input type="file" id="stockFileUpload" accept=".xlsx,.xls,.csv" onchange="document.getElementById('selectedFileName').textContent = this.files[0] ? this.files[0].name : ''">
                    <div>
                        <span id="selectedFileName"></span>
                        <div class="validation-error" id="fileError"></div>
                    </div>
                    <button type="button" class="upload-button" onclick="uploadStockFile()">
                        <i class="fas fa-upload"></i> Dosya YÃ¼kle
                    </button>
                    <button type="button" class="btn btn-secondary" onclick="downloadTemplate()" style="margin-left: 10px;">
                        <i class="fas fa-download"></i> Åžablon Ä°ndir
                    </button>
                </div>
            </div>

            <div class="tab-pane admin-only" id="reportsTab">
                <div class="packaging-header">
                    <h3>Raporlar</h3>
                    <div class="action-buttons">
                        <button type="button" class="btn btn-primary" onclick="generateCustomReport()">Ã–zel Rapor</button>
                        <button type="button" class="btn btn-warning" onclick="exportReports()">RaporlarÄ± DÄ±ÅŸa Aktar</button>
                    </div>
                </div>

                <div class="report-filters" style="display: flex; gap: 15px; margin-bottom: 20px; flex-wrap: wrap;">
                    <div class="info-group">
                        <label for="reportType">Rapor TÃ¼rÃ¼</label>
                        <select id="reportType">
                            <option value="daily">GÃ¼nlÃ¼k Rapor</option>
                            <option value="weekly">HaftalÄ±k Rapor</option>
                            <option value="monthly">AylÄ±k Rapor</option>
                            <option value="custom">Ã–zel Rapor</option>
                        </select>
                    </div>
                    <div class="info-group">
                        <label for="startDate">BaÅŸlangÄ±Ã§ Tarihi</label>
                        <input type="date" id="startDate">
                    </div>
                    <div class="info-group">
                        <label for="endDate">BitiÅŸ Tarihi</label>
                        <input type="date" id="endDate">
                    </div>
                    <div class="info-group" style="align-self: flex-end;">
                        <button type="button" class="btn btn-primary" onclick="loadReports()">RaporlarÄ± YÃ¼kle</button>
                    </div>
                </div>

                <table class="stock-table">
                    <thead>
                        <tr>
                            <th>Rapor Tarihi</th>
                            <th>Rapor TÃ¼rÃ¼</th>
                            <th>Paket SayÄ±sÄ±</th>
                            <th>Toplam Adet</th>
                            <th>OluÅŸturan</th>
                            <th>Ä°ÅŸlemler</th>
                        </tr>
                    </thead>
                    <tbody id="reportsTableBody">
                        <!-- Reports will be populated here -->
                    </tbody>
                </table>
            </div>
        </div>

        <div class="app-footer">
            <div class="container-info">
                <span>Aktif Konteyner: <strong id="containerNumber">Yok</strong></span>
                <span>|</span>
                <span>Toplam Paket: <strong id="totalPackages">0</strong></span>
                <span>|</span>
                <span>ProClean Â© 2025</span>
            </div>
            <div id="connectionStatus">Ã‡evrimiÃ§i</div>
        </div>
    </div>

    <!-- Alert container -->
    <div class="alert-container" id="alertContainer"></div>

    <!-- Customer Modal -->
    <div class="modal" id="customerModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>MÃ¼ÅŸteri SeÃ§</h3>
                <button type="button" class="modal-close" onclick="closeModal()">&times;</button>
            </div>
            <div class="customer-list" id="customerList">
                <!-- Customers will be populated here -->
            </div>
            <div class="modal-buttons">
                <button type="button" class="btn btn-secondary" onclick="closeModal()">Ä°ptal</button>
            </div>
        </div>
    </div>

    <!-- All Customers Modal -->
    <div class="modal" id="allCustomersModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>MÃ¼ÅŸteri YÃ¶netimi</h3>
                <button type="button" class="modal-close" onclick="closeAllCustomersModal()">&times;</button>
            </div>
            <div class="form-group">
                <label for="newCustomerCode">MÃ¼ÅŸteri Kodu</label>
                <input type="text" id="newCustomerCode" placeholder="Ã–rn: P0005" required>
                <div class="validation-error" id="customerCodeError">MÃ¼ÅŸteri kodu gereklidir</div>
            </div>
            <div class="form-group">
                <label for="newCustomerName">MÃ¼ÅŸteri AdÄ±</label>
                <input type="text" id="newCustomerName" placeholder="MÃ¼ÅŸteri adÄ±nÄ± girin" required>
                <div class="validation-error" id="customerNameError">MÃ¼ÅŸteri adÄ± gereklidir</div>
            </div>
            <div class="form-group">
                <label for="newCustomerEmail">E-posta (Ä°steÄŸe baÄŸlÄ±)</label>
                <input type="email" id="newCustomerEmail" placeholder="E-posta adresini girin">
                <div class="validation-error" id="customerEmailError">GeÃ§erli bir e-posta adresi girin</div>
            </div>
            <button type="button" class="btn btn-primary" onclick="addNewCustomer()">MÃ¼ÅŸteri Ekle</button>
            
            <hr style="margin: 1.5rem 0;">
            <h4>Mevcut MÃ¼ÅŸteriler</h4>
            <div class="customer-list" id="allCustomersList">
                <!-- All customers will be populated here -->
            </div>
        </div>
    </div>

    <!-- Email Modal -->
    <div class="modal" id="emailModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Ä°ÅŸ Sonu Raporu GÃ¶nder</h3>
                <button type="button" class="modal-close" onclick="closeEmailModal()">&times;</button>
            </div>
            <div class="form-group">
                <label for="reportEmail">E-posta Adresi</label>
                <input type="email" id="reportEmail" placeholder="Rapor gÃ¶nderilecek e-posta" required>
                <div class="validation-error" id="reportEmailError">GeÃ§erli bir e-posta adresi girin</div>
            </div>
            <div class="modal-buttons">
                <button type="button" class="btn btn-primary" onclick="sendDailyReport()">Rapor GÃ¶nder</button>
                <button type="button" class="btn btn-warning" onclick="previewReport()">Ã–nizleme</button>
                <button type="button" class="btn btn-secondary" onclick="closeEmailModal()">Ä°ptal</button>
            </div>
        </div>
    </div>

    <!-- Quantity Modal -->
    <div class="quantity-modal" id="quantityModal">
        <div class="quantity-content">
            <h3 id="quantityModalTitle">Adet Girin</h3>
            <input type="number" id="quantityInput" class="quantity-input" min="1" placeholder="Adet" required>
            <div class="validation-error" id="quantityError">GeÃ§erli bir adet girin</div>
            <div class="quantity-buttons">
                <button type="button" class="btn btn-primary" onclick="confirmQuantity()">Onayla</button>
                <button type="button" class="btn btn-secondary" onclick="closeQuantityModal()">Ä°ptal</button>
            </div>
        </div>
    </div>

    <!-- Manual Entry Modal -->
    <div class="modal" id="manualModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Manuel ÃœrÃ¼n GiriÅŸi</h3>
                <button type="button" class="modal-close" onclick="closeManualModal()">&times;</button>
            </div>
            <div class="form-group">
                <label for="manualProduct">ÃœrÃ¼n AdÄ±</label>
                <input type="text" id="manualProduct" placeholder="ÃœrÃ¼n adÄ±nÄ± girin" required>
                <div class="validation-error" id="manualProductError">ÃœrÃ¼n adÄ± gereklidir</div>
            </div>
            <div class="form-group">
                <label for="manualQuantity">Adet</label>
                <input type="number" id="manualQuantity" min="1" placeholder="Adet girin" required>
                <div class="validation-error" id="manualQuantityError">GeÃ§erli bir adet girin</div>
            </div>
            <div class="modal-buttons">
                <button type="button" class="btn btn-primary" onclick="addManualProduct()">Ekle</button>
                <button type="button" class="btn btn-secondary" onclick="closeManualModal()">Ä°ptal</button>
            </div>
        </div>
    </div>

    <!-- Container Detail Modal -->
    <div class="modal" id="containerDetailModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="containerDetailTitle">Konteyner DetaylarÄ±</h3>
                <button type="button" class="modal-close" onclick="closeContainerDetailModal()">&times;</button>
            </div>
            <div id="containerDetailContent">
                <!-- Container details will be populated here -->
            </div>
            <div class="modal-buttons" style="margin-top: 20px;">
                <button type="button" class="btn btn-success" onclick="shipContainerFromModal()">Sevk Et</button>
                <button type="button" class="btn btn-secondary" onclick="closeContainerDetailModal()">Kapat</button>
            </div>
        </div>
    </div>

   <!-- Ayarlar ModalÄ± -->
<div class="modal" id="settingsModal">
    <div class="modal-content">
        <div class="modal-header">
            <h2>Ayarlar</h2>
            <button type="button" class="modal-close" id="closeSettingsModalBtn">&times;</button>
        </div>
        
        <!-- Genel Ayarlar -->
        <div class="settings-section">
            <h3>Genel Ayarlar</h3>
            
            <div class="settings-option">
                <label for="themeToggle">Tema Modu</label>
                <div class="toggle-switch">
                    <input type="checkbox" id="themeToggle" onchange="toggleTheme()">
                    <label for="themeToggle" class="toggle-slider"></label>
                    <span id="themeStatus">AÃ§Ä±k</span>
                </div>
            </div>
            
            <div class="settings-option">
                <label for="languageSelect">Dil</label>
                <select id="languageSelect" onchange="changeLanguage()">
                    <option value="tr">TÃ¼rkÃ§e</option>
                    <option value="en">English</option>
                </select>
            </div>
            
            <div class="settings-option">
                <label for="autoSaveToggle">Otomatik Kaydet</label>
                <div class="toggle-switch">
                    <input type="checkbox" id="autoSaveToggle" checked onchange="toggleAutoSave()">
                    <label for="autoSaveToggle" class="toggle-slider"></label>
                    <span>5 saniyede bir</span>
                </div>
            </div>
        </div>

 <!-- YazÄ±cÄ± AyarlarÄ± -->
<div class="settings-section">
    <h3>YazÄ±cÄ± AyarlarÄ±</h3>

    <label for="labelHeader">Label Header:</label>
<input type="text" id="labelHeader" placeholder="Yeditepe" />


    <!-- Etiket Boyutu / Scaling -->
    <div class="settings-option">
        <label for="printerScaling">Etiket Boyutu</label>
        <select id="printerScaling">
            <option value="100%">KÃ¼Ã§Ã¼k (100%)</option>
            <option value="150%">Orta (150%)</option>
            <option value="200%">BÃ¼yÃ¼k (200%)</option>
            <option value="fit">Otomatik SÄ±ÄŸdÄ±r</option>
        </select>
    </div>


    <!-- Kopya SayÄ±sÄ± -->
    <div class="settings-option">
        <label for="copiesNumber">Kopya SayÄ±sÄ±</label>
        <input type="number" id="copiesNumber" min="1" max="10" value="1" style="width: 60px;">
    </div>

    <!-- Font Family -->
    <div class="settings-option">
        <label for="fontName">Font</label>
        <select id="fontName">
            <option value="Arial">Arial</option>
            <option value="Times New Roman">Times New Roman</option>
            <option value="Verdana">Verdana</option>
            <option value="Tahoma">Tahoma</option>
        </select>
    </div>

    <!-- Font Size -->
    <div class="settings-option">
        <label for="fontSize">Font Boyutu</label>
        <input type="number" id="fontSize" min="6" max="20" value="10" style="width: 60px;">
    </div>

    <!-- Orientation -->
    <div class="settings-option">
        <label for="orientation">YÃ¶nlendirme</label>
        <select id="orientation">
            <option value="portrait">Dikey (Portrait)</option>
            <option value="landscape">Yatay (Landscape)</option>
        </select>
    </div>

    <!-- Margins -->
    <div class="settings-option">
        <label for="marginTop">Ãœst Margin (mm)</label>
        <input type="number" id="marginTop" min="0" max="50" value="5" style="width: 60px;">
    </div>
    <div class="settings-option">
        <label for="marginBottom">Alt Margin (mm)</label>
        <input type="number" id="marginBottom" min="0" max="50" value="5" style="width: 60px;">
    </div>

    <!-- Test Print -->
    <div class="settings-option">
        <label>YazÄ±cÄ± Testi</label>
        <button class="btn btn-primary" id="test-printer-yazdir">Test YazdÄ±r</button>
    </div>
</div>



        <!-- Veri YÃ¶netimi -->
        <div class="settings-section">
            <h3>Veri YÃ¶netimi</h3>
            
            <div class="settings-option">
                <label>Supabase API AnahtarÄ±</label>
                <button class="btn btn-warning" onclick="showApiKeyModal()">API AnahtarÄ±nÄ± DeÄŸiÅŸtir</button>
            </div>
            
            <div class="settings-option">
                <label>Veri Yedekleme</label>
                <div style="display: flex; gap: 10px;">
                    <button class="btn btn-primary" onclick="exportData('json')">JSON Ä°ndir</button>
                    <button class="btn btn-primary" onclick="exportData('excel')">Excel Ä°ndir</button>
                </div>
            </div>
            
            <div class="settings-option">
                <label>Verileri Temizle</label>
                <button class="btn btn-danger" onclick="clearFrontendData()">Yerel Verileri Temizle</button>
            </div>
        </div>

        <!-- Sistem Bilgileri -->
        <div class="settings-section">
            <h3>Sistem Bilgileri</h3>
            
            <div class="settings-option">
                <label>Uygulama Versiyonu</label>
                <span class="system-info">v2.0.0</span>
            </div>
            
            <div class="settings-option">
                <label>Son GÃ¼ncelleme</label>
                <span class="system-info" id="lastUpdateDate">-</span>
            </div>
            
            <div class="settings-option">
                <label>VeritabanÄ± BaÄŸlantÄ±sÄ±</label>
                <span id="dbConnectionStatus" class="status-indicator">Kontrol ediliyor...</span>
            </div>
            
            <div class="settings-option">
                <label>YazÄ±cÄ± Durumu</label>
                <span id="printerConnectionStatus" class="status-indicator">Kontrol ediliyor...</span>
            </div>
        </div>

        <!-- GeliÅŸtirici SeÃ§enekleri (Admin only) -->
        <div class="settings-section admin-only">
            <h3>GeliÅŸtirici SeÃ§enekleri</h3>
            
            <div class="settings-option">
                <label>Hata AyÄ±klama Modu</label>
                <div class="toggle-switch">
                    <input type="checkbox" id="debugModeToggle" onchange="toggleDebugMode()">
                    <label for="debugModeToggle" class="toggle-slider"></label>
                </div>
            </div>
            
            <div class="settings-option">
                <label>Konsol LoglarÄ±</label>
                <button class="btn btn-secondary" onclick="showConsoleLogs()">LoglarÄ± GÃ¶rÃ¼ntÃ¼le</button>
            </div>
            
            <div class="settings-option">
                <label>Performans Testi</label>
                <button class="btn btn-secondary" onclick="runPerformanceTest()">Test Ã‡alÄ±ÅŸtÄ±r</button>
            </div>
        </div>

        <div class="modal-buttons" style="margin-top: 20px;">
            <button type="button" class="btn btn-success" onclick="saveAllSettings()">TÃ¼m AyarlarÄ± Kaydet</button>
            <button type="button" class="btn btn-secondary" onclick="closeSettingsModal()">Kapat</button>
        </div>
    </div>
</div>

    

    <!-- Print Label Container (hidden) -->
    <div id="printContainer" style="display:none;"></div>
    
    
    <div class="toast" id="toast" role="status" aria-live="polite"></div>
    <div class="offline-indicator" id="offlineIndicator">Ã‡evrimdÄ±ÅŸÄ± Mod</div>


<!-- 1. External libraries and database connection first -->
<script src="js/supabase.js"></script>

<!-- 2. UI functions (needed by other modules) -->
<script src="js/printer.js"></script>
<script src="js/ui.js"></script>

<!-- 3. Authentication (depends on supabase and ui) -->
<script src="js/auth.js"></script>

<!-- 4. Core application logic (depends on supabase, ui, auth) -->
<script src="js/reports.js"></script>
<script src="js/app.js"></script>

<!-- 5. Feature modules (depend on core functionality) -->
<script src="js/stock.js"></script>
<script src="js/darkMode.js"></script>
<script src="renderer.js"></script>


            <script>
  const printBtn = document.getElementById('printBarcodeBtn');

  printBtn.addEventListener('click', () => {
    // Get the HTML of the barcode area
    const barcodeArea = document.getElementById('barcode-area');
    if (!barcodeArea) {
      alert('No barcode found to print!');
      return;
    }

    // Send HTML to Electron for direct printing
    window.electronAPI.printBarcode(`
      <html>
        <head>
          <title>Barcode</title>
        </head>
        <body>${barcodeArea.outerHTML}</body>
      </html>
    `);
  });
</script>
</body>
</html>
